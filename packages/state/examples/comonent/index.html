<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>simple state</title>
  <script type="importmap">
    {
      "imports": {
        "@wcstack/state": "../../dist/index.esm.js",
        "@components/myComponent": "./components/myComponent.js"
      }
    }
  </script>
  <style>
    .over {
      color: red;
    }
  </style>
</head>
<body>
  <wcs-state>
    <script type="module">
import "@components/myComponent";
import { bootstrapState } from "@wcstack/state";
bootstrapState();

export default {
  count: 0,
  user: { id: 1, name: "Alice" },
  users: [
    { id: 1, name: "Alice" },
    { id: 2, name: "Bob" },
    { id: 3, name: "Charlie" }
  ],
  countUp() {
    this.count += 1;
  },
  clearCount() {
    this.count = 0;
  },
  toggle: false,
  toggleName(e) {
    if (this.toggle === false) {
      this["user.name"] = this["user.name"].toUpperCase();
    } else {
      this["user.name"] = this["user.name"].toLowerCase();
    }
    this.toggle = !this.toggle;
  },
  get "users.*.dispName"() {
    return this["users.*.name"] + " (ID: " + this["users.*.id"] + ")";
  },
  isActive: true
};
    </script>
  </wcs-state>

  <div data-bind-state="textContent: count; class.over: count|gt(10)"></div>
  <button name="increment" data-bind-state="onclick: countUp">Increment</button>
  <button name="clear" data-bind-state="onclick: clearCount">clear</button>
  <br>

  <input type="text" name="userName" data-bind-state="value: user.name">
  <div data-bind-state="textContent: user.name"></div>
  {{ user.name }}
  <br>
  <button name="toggleName" data-bind-state="onclick: toggleName">Toggle Name</button>
  <br>
  {{ isActive }}
  <input type="checkbox" name="toggle" data-bind-state="checked: isActive">
  <div>
  </div>
  <div>
    <template data-bind-state="if: toggle">
      toggle on
    </template>
    <template data-bind-state="elseif: isActive">
      toggle off / isActive on
    </template>
    <template data-bind-state="else:">
      toggle off / isActive off
    </template>
  </div>
  <template data-bind-state="for: users">
    <div>
      <span data-bind-state="textContent: .id"></span>:
      <input type="text" data-bind-state="value: .name">
      <span data-bind-state="textContent: .name"></span>
      <span data-bind-state="textContent: .dispName"></span>
    </div>
  </template>

  <my-component data-bind-state="outer.message: user.name"></my-component>
</body>
</html>