const e="*",t="vanilla",n={postfix:".js",loader:async function(e){return(await import(`${e}`)).default}},o={scanImportmap:!0,loaders:{[t]:n,[e]:t},observable:!0},r=o;const a="@components/";function l(e){if(e.startsWith(a)){if(e.endsWith("/")){const t=e.slice(12,e.length-1),[n,o]=t.split("|",2);if(""===n)throw new Error("Invalid importmap key: "+e);return{key:e,prefix:n.replaceAll("/","-").toLowerCase(),loaderKey:o??null,isNameSpaced:!0}}{const t=e.slice(12),[n,o]=t.split("|",2),[r,a]=(o??"").split(",",2);if(""===n)throw new Error("Invalid importmap key: "+e);return{key:e,tagName:n.replaceAll("/","-").toLowerCase(),loaderKey:r||null,extends:a||null,isNameSpaced:!1}}}return null}function s(t,n,o){let r;if(null===n||n===e||""===n){let n=null;const a=[];for(const[t,n]of Object.entries(o)){if(t===e)continue;const r="string"==typeof n?o[n]:n;"string"!=typeof r&&a.push(r)}a.sort((e,t)=>t.postfix.length-e.postfix.length);for(const e of a)if(t.endsWith(e.postfix)){n=e;break}n?r=n:(r=o[e],"string"==typeof r&&(r=o[r]))}else if(r=o[n],!r)throw new Error("Loader not found: "+n);if("string"==typeof r)throw new Error("Loader redirection is not supported here");return r}const i=new Set,m=new Set,c=new Map;if("undefined"!=typeof window){[[HTMLButtonElement,"button"],[HTMLInputElement,"input"],[HTMLAnchorElement,"a"],[HTMLImageElement,"img"],[HTMLDivElement,"div"],[HTMLSpanElement,"span"],[HTMLParagraphElement,"p"],[HTMLUListElement,"ul"],[HTMLOListElement,"ol"],[HTMLLIElement,"li"],[HTMLTableElement,"table"],[HTMLFormElement,"form"],[HTMLLabelElement,"label"],[HTMLSelectElement,"select"],[HTMLTextAreaElement,"textarea"],[HTMLHeadingElement,"h1"],[HTMLQuoteElement,"blockquote"],[HTMLPreElement,"pre"],[HTMLBRElement,"br"],[HTMLHRElement,"hr"],[HTMLModElement,"ins"],[HTMLTableCaptionElement,"caption"],[HTMLTableColElement,"col"],[HTMLTableSectionElement,"tbody"],[HTMLTableRowElement,"tr"],[HTMLTableCellElement,"td"],[HTMLFieldSetElement,"fieldset"],[HTMLLegendElement,"legend"],[HTMLDListElement,"dl"],[HTMLOptGroupElement,"optgroup"],[HTMLOptionElement,"option"],[HTMLStyleElement,"style"],[HTMLScriptElement,"script"],[HTMLTemplateElement,"template"],[HTMLCanvasElement,"canvas"],[HTMLIFrameElement,"iframe"],[HTMLObjectElement,"object"],[HTMLEmbedElement,"embed"],[HTMLVideoElement,"video"],[HTMLAudioElement,"audio"],[HTMLTrackElement,"track"],[HTMLMapElement,"map"],[HTMLAreaElement,"area"],[HTMLSourceElement,"source"],[HTMLParamElement,"param"],[HTMLMeterElement,"meter"],[HTMLProgressElement,"progress"],[HTMLOutputElement,"output"],[HTMLDetailsElement,"details"],[HTMLDialogElement,"dialog"],[HTMLMenuElement,"menu"],[HTMLSlotElement,"slot"],[HTMLTimeElement,"time"],[HTMLDataElement,"data"],[HTMLPictureElement,"picture"]].forEach(([e,t])=>{void 0!==e&&c.set(e,t)})}async function d(e,t,n){try{if(customElements.get(t))return;const o=await n.loader(e.key);if(null!==o){let n=e.extends;if(null===n&&(n=function(e){for(const[t,n]of c)if(e.prototype instanceof t)return n;return null}(o)),customElements.get(t))return;null===n?customElements.define(t,o):customElements.define(t,o,{extends:n})}}catch(e){i.has(t)||(console.error(`Failed to eager load component '${t}':`,e),i.add(t))}}function u(e){const t=e.tagName.toLowerCase();let n,o;if(t.includes("-"))n=t,o=null;else{const r=e.getAttribute("is");if(null===r)throw new Error("Custom element without a dash or 'is' attribute found: "+t);if(!r.includes("-"))throw new Error("Custom element 'is' attribute without a dash found: "+t);n=r,o=t}return{name:n,extends:o}}const p=new WeakSet;async function f(e,t,n){e.shadowRoot&&(p.has(e)||await async function(e,t,n){p.add(e),await M(e.shadowRoot,t,n)}(e,t,n))}async function E(e,t,n){const o=function(e,t){for(const[n,o]of Object.entries(t))if(e.startsWith(n+"-"))return o;return null}(e.name,n);if(null===o)throw new Error("No matching namespace found for lazy loaded component: "+e.name);if(m.has(e.name))await customElements.whenDefined(e.name);else{m.add(e.name);try{let n;try{n=s("",o.loaderKey,t.loaders)}catch(t){throw new Error("Loader redirection is not supported for lazy loaded components: "+e.name)}const r=e.name.slice(o.prefix.length+1);if(""===r)throw new Error("Invalid component name for lazy loaded component: "+e.name);const a=o.key+r+n.postfix;if(customElements.get(e.name))return;const l=await n.loader(a);if(null===l)throw new Error("Loader returned null for component: "+e.name);if(customElements.get(e.name))return;null===e.extends?customElements.define(e.name,l):customElements.define(e.name,l,{extends:e.extends})}catch(t){console.error(`Failed to lazy load component '${e.name}':`,t),i.add(e.name)}finally{m.delete(e.name)}}}async function L(e,t,n){const o=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,e=>(e=>(e instanceof Element&&(e.tagName.includes("-")||e.getAttribute("is")?.includes("-")))??!1)(e)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP);for(;r.nextNode();)o.push(r.currentNode);const a=[],l=new Set;for(const e of o){const o=u(e);void 0===customElements.get(o.name)?(customElements.whenDefined(o.name).then(async()=>{await f(e,t,n)}),l.has(o.name)||i.has(o.name)||(l.add(o.name),a.push(o))):await f(e,t,n)}let s=0;for(const e of a)await E(e,t,n),s++;return s}async function T(e,t,n){for(;await L(e,t,n)>0;);}async function M(e,t,n){if(0===Object.keys(n).length)return;try{await T(e,t,n)}catch(e){throw new Error("Failed to lazy load components: "+e)}if(!t.observable)return;new MutationObserver(async()=>{try{await T(e,t,n)}catch(e){console.error("Failed to lazy load components: "+e)}}).observe(e,{childList:!0,subtree:!0})}async function w(){const e=function(){const e={imports:{}};return document.querySelectorAll('script[type="importmap"]').forEach(t=>{try{const n=JSON.parse(t.innerHTML);n.imports&&(e.imports=Object.assign(e.imports,n.imports))}catch(e){throw new Error("Failed to parse importmap JSON: "+e)}}),Object.keys(e.imports).length>0?e:null}();if(null===e)return;const{prefixMap:t,loadMap:n}=function(e){const t={},n={};for(const[o,r]of Object.entries(e.imports)){const e=l(o);null!==e&&(e.isNameSpaced?t[e.prefix]=e:n[e.tagName]=e)}return{prefixMap:t,loadMap:n}}(e);document.addEventListener("DOMContentLoaded",async()=>{await M(document,r,t)});try{await async function(e,t){const n=[];for(const[o,r]of Object.entries(e)){let e;try{e=s(r.key,r.loaderKey,t)}catch(e){throw new Error("Loader redirection is not supported for eager loaded components: "+o)}n.push(d(r,o,e))}await Promise.all(n)}(n,r.loaders)}catch(e){throw new Error("Failed to eager load components: "+e)}}async function h(e){var t;e&&("boolean"==typeof(t=e).scanImportmap&&(o.scanImportmap=t.scanImportmap),t.loaders&&Object.assign(o.loaders,t.loaders),"boolean"==typeof t.observable&&(o.observable=t.observable)),await w()}export{h as bootstrapAutoloader};
//# sourceMappingURL=index.esm.min.js.map
